<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-commerce - Assignment 2</title>
    <link rel="icon" href="/favicon.svg" type="image/icon type" />
    <link rel="stylesheet" href="/css/styles/core.css" />
    <link rel="stylesheet" href="/css/styles/header.css" />
    <link rel="stylesheet" href="/css/styles/footer.css" />
    <link rel="stylesheet" href="/css/styles/category.css" />
    <link rel="stylesheet" href="/css/styles/product.css" />
    <link rel="stylesheet" href="/css/style.css">
    <script src="/lib/handlebars.js"></script>
    <script src="/js/main.js" type="text/javascript"></script>
    <script src="/js/components/categories.js" type="text/javascript"></script>
    <script src="/js/components/product.js" type="text/javascript"></script>
    <script src="/js/core/layout.js" type="text/javascript"></script>
    <script src="/js/core/apis.js" type="text/javascript"></script>
    <link rel="stylesheet" href="/css/style.css">
    <script>
        const url = window.location;
        const searchParams = new URLSearchParams(url.search)
        const categoryId = searchParams.getAll("categoryId")[0];
        getCategories().then(data => {
            data.forEach(category => {
                if (category.id == categoryId) {
                    document.getElementById("page-title").innerHTML = category.title;
                    document.getElementById("banner-image").src = category.img_url;
                    document.title = category.title
                }
            });

        })
        getSubCategories(categoryId).then(data => {
            document.getElementById("subcategories-list").innerHTML = categoryWithOutImage(data,categoryId)
        })
        document.addEventListener("DOMContentLoaded", function(){
        getProducts(categoryId);
        })
        </script>
</head>

<body>
    <header id="header">
    </header>
    <main class="container">
        <h1 class="page-title" id="page-title"></h1>
        <div class="category-image-header-container">
            <img src="" alt="Τεχνολογία" title="Τεχνολογία" id="banner-image" />
        </div>
        <section class="categories">
            <ul id="subcategories-list">
                <!-- TODO link must go to product-list -->
            </ul>
        </section>
        <!-- Doesn't appear right -->
        <section id="subcategories-list-products" class="products products-categories-grid">
                
        </section>


    </main>


    <footer id="footer"></footer>
</body>

</html>